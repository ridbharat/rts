<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Rating System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="stylesheet" href="/RTS/public/css/reating/reating.css">
   
       
        
</head>
<body>
    <div class="container">
        <h1>Rating for Exam Service</h1>
        <p class="description">We value your feedback! Please rate your experience and share any additional comments to help us improve.</p>
        
        <div class="tabs">
            <div class="tab active" data-tab="rate">Rate Product</div>
            <div class="tab" data-tab="reviews">Customer Reviews</div>
            <div class="tab" data-tab="stats">Rating Statistics</div>
            <div class="tab" data-tab="count">Rating Details</div>
        </div>
        
        <div class="tab-content active" id="rate-tab">
            <div class="rating-container">
                <div class="stars">
                    <div class="star" data-rating="1">★</div>
                    <div class="star" data-rating="2">★</div>
                    <div class="star" data-rating="3">★</div>
                    <div class="star" data-rating="4">★</div>
                    <div class="star" data-rating="5">★</div>
                </div>
                <div class="rating-text">Click on a star to rate</div>
            </div>
            
            <div class="feedback-section">
                <label for="feedback">Additional Feedback (Optional)</label>
                <textarea id="feedback" rows="4" placeholder="Tell us more about your experience..."></textarea>
                <button class="submit-btn" id="submit-btn" disabled>Submit Rating</button>
            </div>
            
            <div class="thank-you" id="thank-you">
                <h2>Thank You!</h2>
                <p>Your feedback has been submitted. We appreciate your time and input.</p>
            </div>
        </div>
        
        <div class="tab-content" id="reviews-tab">
            <div class="review-list" id="review-list">
                <!-- Reviews will be dynamically added here -->
            </div>
        </div>
        
        <div class="tab-content" id="stats-tab">
            <div class="average-rating" id="average-rating">4.2</div>
            <div class="rating-summary">
                <h3>Rating Summary</h3>
                <div class="rating-stats">
                    <span>5 stars</span>
                    <span id="five-star-percent">65%</span>
                </div>
                <div class="rating-bar">
                    <div class="rating-fill" id="five-star-bar" style="width: 65%"></div>
                </div>
                
                <div class="rating-stats">
                    <span>4 stars</span>
                    <span id="four-star-percent">20%</span>
                </div>
                <div class="rating-bar">
                    <div class="rating-fill" id="four-star-bar" style="width: 20%"></div>
                </div>
                
                <div class="rating-stats">
                    <span>3 stars</span>
                    <span id="three-star-percent">10%</span>
                </div>
                <div class="rating-bar">
                    <div class="rating-fill" id="three-star-bar" style="width: 10%"></div>
                </div>
                
                <div class="rating-stats">
                    <span>2 stars</span>
                    <span id="two-star-percent">3%</span>
                </div>
                <div class="rating-bar">
                    <div class="rating-fill" id="two-star-bar" style="width: 3%"></div>
                </div>
                
                <div class="rating-stats">
                    <span>1 star</span>
                    <span id="one-star-percent">2%</span>
                </div>
                <div class="rating-bar">
                    <div class="rating-fill" id="one-star-bar" style="width: 2%"></div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="count-tab">
            <div class="total-ratings" id="total-ratings">Total Ratings: 8</div>
            <div class="rating-count-container">
                <div class="rating-count-item">
                    <div class="rating-count-stars">★★★★★</div>
                    <div class="rating-count-value" id="five-star-count">5 ratings</div>
                </div>
                <div class="rating-count-item">
                    <div class="rating-count-stars">★★★★☆</div>
                    <div class="rating-count-value" id="four-star-count">2 ratings</div>
                </div>
                <div class="rating-count-item">
                    <div class="rating-count-stars">★★★☆☆</div>
                    <div class="rating-count-value" id="three-star-count">1 rating</div>
                </div>
                <div class="rating-count-item">
                    <div class="rating-count-stars">★★☆☆☆</div>
                    <div class="rating-count-value" id="two-star-count">0 ratings</div>
                </div>
                <div class="rating-count-item">
                    <div class="rating-count-stars">★☆☆☆☆</div>
                    <div class="rating-count-value" id="one-star-count">0 ratings</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulated database using localStorage
        const STORAGE_KEY = 'productRatings';
        
        // Initialize with sample data if none exists
        function initializeData() {
            if (!localStorage.getItem(STORAGE_KEY)) {
                const sampleData = {
                    ratings: [
                        { rating: 5, feedback: "Excellent product! Fast delivery and great quality.", date: "2023-10-15" },
                        { rating: 4, feedback: "Good laptop, but battery life could be better.", date: "2023-10-10" },
                        { rating: 5, feedback: "Love this laptop! Perfect for my work and gaming needs.", date: "2023-10-05" },
                        { rating: 3, feedback: "Decent laptop but a bit overpriced for the features.", date: "2023-09-28" },
                        { rating: 5, feedback: "Amazing performance! Would definitely recommend.", date: "2023-09-20" },
                        { rating: 4, feedback: "Solid laptop with good build quality.", date: "2023-09-15" },
                        { rating: 2, feedback: "Had some issues with the keyboard. Customer service was helpful though.", date: "2023-09-10" },
                        { rating: 5, feedback: "Best laptop I've ever owned! Fast and reliable.", date: "2023-09-05" }
                    ]
                };
                localStorage.setItem(STORAGE_KEY, JSON.stringify(sampleData));
            }
            return JSON.parse(localStorage.getItem(STORAGE_KEY));
        }
        
        // Save rating to localStorage
        function saveRating(rating, feedback) {
            const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
            const newRating = {
                rating: rating,
                feedback: feedback,
                date: new Date().toISOString().split('T')[0] // YYYY-MM-DD format
            };
            data.ratings.push(newRating);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            return data;
        }

        
        // Calculate rating statistics
        function calculateStats(ratings) {
            const total = ratings.length;
            if (total === 0) return { 
                average: 0, 
                distribution: { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 },
                counts: { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 }
            };
            
            let sum = 0;
            const distribution = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 };
            const counts = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 };
            
            ratings.forEach(r => {
                sum += r.rating;
                distribution[r.rating]++;
                counts[r.rating]++;
            });
            
            // Convert to percentages
            for (let key in distribution) {
                distribution[key] = Math.round((distribution[key] / total) * 100);
            }
            
            return {
                average: (sum / total).toFixed(1),
                distribution: distribution,
                counts: counts,
                total: total
            };
        }
        
        // Update UI with statistics
        function updateStats() {
            const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
            const stats = calculateStats(data.ratings);
            
            // Update average rating
            document.getElementById('average-rating').textContent = stats.average;
            
            // Update distribution bars
            document.getElementById('five-star-percent').textContent = stats.distribution[5] + '%';
            document.getElementById('five-star-bar').style.width = stats.distribution[5] + '%';
            
            document.getElementById('four-star-percent').textContent = stats.distribution[4] + '%';
            document.getElementById('four-star-bar').style.width = stats.distribution[4] + '%';
            
            document.getElementById('three-star-percent').textContent = stats.distribution[3] + '%';
            document.getElementById('three-star-bar').style.width = stats.distribution[3] + '%';
            
            document.getElementById('two-star-percent').textContent = stats.distribution[2] + '%';
            document.getElementById('two-star-bar').style.width = stats.distribution[2] + '%';
            
            document.getElementById('one-star-percent').textContent = stats.distribution[1] + '%';
            document.getElementById('one-star-bar').style.width = stats.distribution[1] + '%';
            
            // Update rating counts
            updateRatingCounts(stats);
        }
        
        // Update rating counts display
        function updateRatingCounts(stats) {
            document.getElementById('total-ratings').textContent = `Total Ratings: ${stats.total}`;
            
            document.getElementById('five-star-count').textContent = 
                `${stats.counts[5]} rating${stats.counts[5] !== 1 ? 's' : ''}`;
            document.getElementById('four-star-count').textContent = 
                `${stats.counts[4]} rating${stats.counts[4] !== 1 ? 's' : ''}`;
            document.getElementById('three-star-count').textContent = 
                `${stats.counts[3]} rating${stats.counts[3] !== 1 ? 's' : ''}`;
            document.getElementById('two-star-count').textContent = 
                `${stats.counts[2]} rating${stats.counts[2] !== 1 ? 's' : ''}`;
            document.getElementById('one-star-count').textContent = 
                `${stats.counts[1]} rating${stats.counts[1] !== 1 ? 's' : ''}`;
        }
        
        // Display reviews
        function displayReviews() {
            const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
            const reviewList = document.getElementById('review-list');
            reviewList.innerHTML = '';
            
            // Sort by date (newest first)
            const sortedRatings = [...data.ratings].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedRatings.forEach(rating => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                const starsHtml = '★'.repeat(rating.rating) + '☆'.repeat(5 - rating.rating);
                
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="review-stars">${starsHtml}</div>
                        <div class="review-date">${rating.date}</div>
                    </div>
                    <div class="review-content">${rating.feedback || 'No additional feedback provided.'}</div>
                `;
                
                reviewList.appendChild(reviewItem);
            });
        }
        
        // Tab functionality
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Show active tab content
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${tabId}-tab`) {
                            content.classList.add('active');
                        }
                    });
                    
                    // Refresh data when switching to stats or reviews tab
                    if (tabId === 'stats' || tabId === 'count') {
                        updateStats();
                    } else if (tabId === 'reviews') {
                        displayReviews();
                    }
                });
            });
        }
        
        // Main initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize data
            initializeData();
            
            const stars = document.querySelectorAll('.star');
            const ratingText = document.querySelector('.rating-text');
            const submitBtn = document.getElementById('submit-btn');
            const thankYou = document.getElementById('thank-you');
            const feedback = document.getElementById('feedback');
            
            let currentRating = 0;
            
            // Rating messages
            const ratingMessages = {
                1: "Poor - We're sorry to hear that",
                2: "Fair - We'll try to do better",
                3: "Good - We're glad you liked it",
                4: "Very Good - We're happy you enjoyed it",
                5: "Excellent - We're thrilled you loved it"
            };
            
            // Add event listeners to stars
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    currentRating = parseInt(this.getAttribute('data-rating'));
                    updateStars(currentRating);
                    ratingText.textContent = ratingMessages[currentRating];
                    submitBtn.disabled = false;
                });
                
                star.addEventListener('mouseover', function() {
                    const hoverRating = parseInt(this.getAttribute('data-rating'));
                    updateStars(hoverRating, false);
                });
                
                star.addEventListener('mouseout', function() {
                    updateStars(currentRating);
                });
            });
            
            // Submit button event
            submitBtn.addEventListener('click', function() {
                if (currentRating === 0) {
                    alert('Please select a rating before submitting.');
                    return;
                }
                
                // Save to "database"
                saveRating(currentRating, feedback.value);
                
                // Show thank you message
                thankYou.style.display = 'block';
                
                // Reset form after a delay
                setTimeout(() => {
                    currentRating = 0;
                    updateStars(0);
                    ratingText.textContent = 'Click on a star to rate';
                    feedback.value = '';
                    thankYou.style.display = 'none';
                    submitBtn.disabled = true;
                    
                    // Update stats and reviews
                    updateStats();
                    displayReviews();
                }, 3000);
            });
            
            // Function to update star appearance
            function updateStars(rating, permanent = true) {
                stars.forEach(star => {
                    const starRating = parseInt(star.getAttribute('data-rating'));
                    if (starRating <= rating) {
                        star.classList.add('active');
                    } else {
                        star.classList.remove('active');
                    }
                });
                
                if (permanent) {
                    currentRating = rating;
                }
            }
            
            // Initialize tabs
            setupTabs();
            
            // Initialize stats and reviews
            updateStats();
            displayReviews();
        });
    </script>


</body>
</html>