const questions = [
   {
    "num":1,
    "question_en": "If sin θ = 3/5, then the value of (cosec θ + cot θ) is:",
    "question_hi": "यदि sin θ = 3/5, तो (cosec θ + cot θ) का मान है:",
    "options_en": ["2", "3", "4", "5"],
    "options_hi": ["2", "3", "4", "5"],
    "answer_en": "2",
    "answer_hi": "2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":2,
    "question_en": "The sum of first 20 odd natural numbers is:",
    "question_hi": "पहली 20 विषम प्राकृतिक संख्याओं का योग है:",
    "options_en": ["200", "210", "400", "420"],
    "options_hi": ["200", "210", "400", "420"],
    "answer_en": "400",
    "answer_hi": "400",
    "attempted": false,
    "selected": ""
  },
  {
    "num":3,
    "question_en": "If 2^x = 3^y = 6^(-z), then the value of (1/x + 1/y + 1/z) is:",
    "question_hi": "यदि 2^x = 3^y = 6^(-z), तो (1/x + 1/y + 1/z) का मान है:",
    "options_en": ["0", "1", "-1", "2"],
    "options_hi": ["0", "1", "-1", "2"],
    "answer_en": "0",
    "answer_hi": "0",
    "attempted": false,
    "selected": ""
  },
  {
    "num":4,
    "question_en": "The area of a triangle with vertices (0,0), (4,0) and (0,3) is:",
    "question_hi": "शीर्ष (0,0), (4,0) और (0,3) वाले त्रिभुज का क्षेत्रफल है:",
    "options_en": ["6", "12", "7.5", "10"],
    "options_hi": ["6", "12", "7.5", "10"],
    "answer_en": "6",
    "answer_hi": "6",
    "attempted": false,
    "selected": ""
  },
  {
    "num":5,
    "question_en": "If the circumference of a circle is increased by 50%, its area will increase by:",
    "question_hi": "यदि एक वृत्त की परिधि 50% बढ़ा दी जाए, तो इसका क्षेत्रफल बढ़ेगा:",
    "options_en": ["50%", "100%", "125%", "225%"],
    "options_hi": ["50%", "100%", "125%", "225%"],
    "answer_en": "125%",
    "answer_hi": "125%",
    "attempted": false,
    "selected": ""
  },
  {
    "num":6,
    "question_en": "The solution of the equation x² - 4x + 4 = 0 is:",
    "question_hi": "समीकरण x² - 4x + 4 = 0 का हल है:",
    "options_en": ["x = 2 only", "x = -2 only", "x = 2, -2", "x = 4"],
    "options_hi": ["केवल x = 2", "केवल x = -2", "x = 2, -2", "x = 4"],
    "answer_en": "x = 2 only",
    "answer_hi": "केवल x = 2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":7,
    "question_en": "If log₁₀2 = 0.3010, then log₁₀8 is:",
    "question_hi": "यदि log₁₀2 = 0.3010, तो log₁₀8 है:",
    "options_en": ["0.3010", "0.6020", "0.9030", "1.2040"],
    "options_hi": ["0.3010", "0.6020", "0.9030", "1.2040"],
    "answer_en": "0.9030",
    "answer_hi": "0.9030",
    "attempted": false,
    "selected": ""
  },
  {
    "num":8,
    "question_en": "The mean of first 10 prime numbers is:",
    "question_hi": "पहली 10 अभाज्य संख्याओं का माध्य है:",
    "options_en": ["10.1", "11.2", "12.9", "13.5"],
    "options_hi": ["10.1", "11.2", "12.9", "13.5"],
    "answer_en": "12.9",
    "answer_hi": "12.9",
    "attempted": false,
    "selected": ""
  },
  {
    "num":9,
    "question_en": "If a + b + c = 0, then a³ + b³ + c³ = ?",
    "question_hi": "यदि a + b + c = 0, तो a³ + b³ + c³ = ?",
    "options_en": ["0", "abc", "3abc", "a²b²c²"],
    "options_hi": ["0", "abc", "3abc", "a²b²c²"],
    "answer_en": "3abc",
    "answer_hi": "3abc",
    "attempted": false,
    "selected": ""
  },
  {
    "num":10,
    "question_en": "The distance between points (2,3) and (4,1) is:",
    "question_hi": "बिंदुओं (2,3) और (4,1) के बीच की दूरी है:",
    "options_en": ["√2", "2√2", "√8", "√10"],
    "options_hi": ["√2", "2√2", "√8", "√10"],
    "answer_en": "2√2",
    "answer_hi": "2√2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":11,
    "question_en": "If x + 1/x = 5, then x² + 1/x² = ?",
    "question_hi": "यदि x + 1/x = 5, तो x² + 1/x² = ?",
    "options_en": ["23", "25", "27", "29"],
    "options_hi": ["23", "25", "27", "29"],
    "answer_en": "23",
    "answer_hi": "23",
    "attempted": false,
    "selected": ""
  },
  {
    "num":12,
    "question_en": "The HCF of 24, 36 and 60 is:",
    "question_hi": "24, 36 और 60 का महत्तम समापवर्तक है:",
    "options_en": ["4", "6", "12", "24"],
    "options_hi": ["4", "6", "12", "24"],
    "answer_en": "12",
    "answer_hi": "12",
    "attempted": false,
    "selected": ""
  },
  {
    "num":13,
    "question_en": "If tan θ = 1/√3, then the value of (sin θ + cos θ) is:",
    "question_hi": "यदि tan θ = 1/√3, तो (sin θ + cos θ) का मान है:",
    "options_en": ["(√3+1)/2", "(√3-1)/2", "(1+√3)/√2", "(√3+1)/√2"],
    "options_hi": ["(√3+1)/2", "(√3-1)/2", "(1+√3)/√2", "(√3+1)/√2"],
    "answer_en": "(√3+1)/2",
    "answer_hi": "(√3+1)/2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":14,
    "question_en": "The sum of digits of a two-digit number is 7. If digits are reversed, the number increases by 27. The original number is:",
    "question_hi": "एक दो-अंकीय संख्या के अंकों का योग 7 है। यदि अंकों को उलट दिया जाए, तो संख्या 27 बढ़ जाती है। मूल संख्या है:",
    "options_en": ["25", "34", "43", "52"],
    "options_hi": ["25", "34", "43", "52"],
    "answer_en": "25",
    "answer_hi": "25",
    "attempted": false,
    "selected": ""
  },
  {
    "num":15,
    "question_en": "The roots of quadratic equation x² + x - 6 = 0 are:",
    "question_hi": "द्विघात समीकरण x² + x - 6 = 0 के मूल हैं:",
    "options_en": ["2, -3", "-2, 3", "2, 3", "-2, -3"],
    "options_hi": ["2, -3", "-2, 3", "2, 3", "-2, -3"],
    "answer_en": "2, -3",
    "answer_hi": "2, -3",
    "attempted": false,
    "selected": ""
  },
  {
    "num":16,
    "question_en": "If a train 150 m long passes a pole in 5 seconds, its speed in km/hr is:",
    "question_hi": "यदि 150 मीटर लंबी एक ट्रेन एक खंभे को 5 सेकंड में पार करती है, तो किमी/घंटा में इसकी गति है:",
    "options_en": ["72", "90", "108", "120"],
    "options_hi": ["72", "90", "108", "120"],
    "answer_en": "108",
    "answer_hi": "108",
    "attempted": false,
    "selected": ""
  },
  {
    "num":17,
    "question_en": "The value of (0.000064)^(1/3) is:",
    "question_hi": "(0.000064)^(1/3) का मान है:",
    "options_en": ["0.004", "0.04", "0.4", "4"],
    "options_hi": ["0.004", "0.04", "0.4", "4"],
    "answer_en": "0.04",
    "answer_hi": "0.04",
    "attempted": false,
    "selected": ""
  },
  {
    "num":18,
    "question_en": "The probability of getting an even number when a die is thrown is:",
    "question_hi": "एक पासा फेंकने पर एक सम संख्या प्राप्त होने की प्रायिकता है:",
    "options_en": ["1/2", "1/3", "1/4", "1/6"],
    "options_hi": ["1/2", "1/3", "1/4", "1/6"],
    "answer_en": "1/2",
    "answer_hi": "1/2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":19,
    "question_en": "If the diagonals of a rhombus are 8 cm and 6 cm, its area is:",
    "question_hi": "यदि एक समचतुर्भुज के विकर्ण 8 सेमी और 6 सेमी हैं, तो इसका क्षेत्रफल है:",
    "options_en": ["24 cm²", "48 cm²", "14 cm²", "96 cm²"],
    "options_hi": ["24 वर्ग सेमी", "48 वर्ग सेमी", "14 वर्ग सेमी", "96 वर्ग सेमी"],
    "answer_en": "24 cm²",
    "answer_hi": "24 वर्ग सेमी",
    "attempted": false,
    "selected": ""
  },
  {
    "num":20,
    "question_en": "The compound interest on ₹8000 at 10% per annum for 2 years is:",
    "question_hi": "₹8000 पर 10% वार्षिक दर से 2 वर्षों का चक्रवृद्धि ब्याज है:",
    "options_en": ["₹1600", "₹1680", "₹1800", "₹2000"],
    "options_hi": ["₹1600", "₹1680", "₹1800", "₹2000"],
    "answer_en": "₹1680",
    "answer_hi": "₹1680",
    "attempted": false,
    "selected": ""
  },
  {
    "num":21,
    "question_en": "If x = √5 + 2, then the value of x + 1/x is:",
    "question_hi": "यदि x = √5 + 2, तो x + 1/x का मान है:",
    "options_en": ["2√5", "4", "2√5 - 4", "√5"],
    "options_hi": ["2√5", "4", "2√5 - 4", "√5"],
    "answer_en": "2√5",
    "answer_hi": "2√5",
    "attempted": false,
    "selected": ""
  },
  {
    "num":22,
    "question_en": "The sum of interior angles of a pentagon is:",
    "question_hi": "एक पंचभुज के आंतरिक कोणों का योग है:",
    "options_en": ["360°", "540°", "720°", "900°"],
    "options_hi": ["360°", "540°", "720°", "900°"],
    "answer_en": "540°",
    "answer_hi": "540°",
    "attempted": false,
    "selected": ""
  },
  {
    "num":23,
    "question_en": "If 5 men can complete a work in 12 days, how many days will 8 men take?",
    "question_hi": "यदि 5 पुरुष एक काम को 12 दिनों में पूरा कर सकते हैं, तो 8 पुरुष कितने दिनों में करेंगे?",
    "options_en": ["7.5", "8", "9", "10"],
    "options_hi": ["7.5", "8", "9", "10"],
    "answer_en": "7.5",
    "answer_hi": "7.5",
    "attempted": false,
    "selected": ""
  },
  {
    "num":24,
    "question_en": "The value of sin 45° cos 45° + cos 45° sin 45° is:",
    "question_hi": "sin 45° cos 45° + cos 45° sin 45° का मान है:",
    "options_en": ["0", "1/2", "1", "√2"],
    "options_hi": ["0", "1/2", "1", "√2"],
    "answer_en": "1",
    "answer_hi": "1",
    "attempted": false,
    "selected": ""
  },
  {
    "num":25,
    "question_en": "A shopkeeper sells an item at 20% profit. If cost price is ₹500, selling price is:",
    "question_hi": "एक दुकानदार एक वस्तु को 20% लाभ पर बेचता है। यदि क्रय मूल्य ₹500 है, तो विक्रय मूल्य है:",
    "options_en": ["₹550", "₹600", "₹650", "₹700"],
    "options_hi": ["₹550", "₹600", "₹650", "₹700"],
    "answer_en": "₹600",
    "answer_hi": "₹600",
    "attempted": false,
    "selected": ""
  },
  {
    "num":26,
    "question_en": "The median of data: 3, 5, 7, 9, 11, 13 is:",
    "question_hi": "डेटा: 3, 5, 7, 9, 11, 13 का माध्यिका है:",
    "options_en": ["7", "8", "9", "10"],
    "options_hi": ["7", "8", "9", "10"],
    "answer_en": "8",
    "answer_hi": "8",
    "attempted": false,
    "selected": ""
  },
  {
    "num":27,
    "question_en": "If 2x - 3y = 7 and 4x + y = 9, then x = ?",
    "question_hi": "यदि 2x - 3y = 7 और 4x + y = 9, तो x = ?",
    "options_en": ["2", "3", "4", "5"],
    "options_hi": ["2", "3", "4", "5"],
    "answer_en": "2",
    "answer_hi": "2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":28,
    "question_en": "The simple interest on ₹2000 for 3 years at 5% per annum is:",
    "question_hi": "₹2000 पर 3 वर्षों के लिए 5% वार्षिक दर से साधारण ब्याज है:",
    "options_en": ["₹200", "₹250", "₹300", "₹350"],
    "options_hi": ["₹200", "₹250", "₹300", "₹350"],
    "answer_en": "₹300",
    "answer_hi": "₹300",
    "attempted": false,
    "selected": ""
  },
  {
    "num":29,
    "question_en": "The volume of a cube of side 5 cm is:",
    "question_hi": "5 सेमी भुजा वाले घन का आयतन है:",
    "options_en": ["25 cm³", "75 cm³", "125 cm³", "625 cm³"],
    "options_hi": ["25 घन सेमी", "75 घन सेमी", "125 घन सेमी", "625 घन सेमी"],
    "answer_en": "125 cm³",
    "answer_hi": "125 घन सेमी",
    "attempted": false,
    "selected": ""
  },
  {
    "num":30,
    "question_en": "If a:b = 3:4 and b:c = 5:6, then a:c = ?",
    "question_hi": "यदि a:b = 3:4 और b:c = 5:6, तो a:c = ?",
    "options_en": ["5:8", "3:6", "5:6", "15:24"],
    "options_hi": ["5:8", "3:6", "5:6", "15:24"],
    "answer_en": "5:8",
    "answer_hi": "5:8",
    "attempted": false,
    "selected": ""
  },
  {
    "num":31,
    "question_en": "The next number in series 1, 4, 9, 16, 25, ... is:",
    "question_hi": "श्रृंखला 1, 4, 9, 16, 25, ... में अगली संख्या है:",
    "options_en": ["30", "36", "49", "64"],
    "options_hi": ["30", "36", "49", "64"],
    "answer_en": "36",
    "answer_hi": "36",
    "attempted": false,
    "selected": ""
  },
  {
    "num":32,
    "question_en": "The value of (1 - sin²θ)/(1 - cos²θ) is:",
    "question_hi": "(1 - sin²θ)/(1 - cos²θ) का मान है:",
    "options_en": ["tan²θ", "cot²θ", "sec²θ", "cosec²θ"],
    "options_hi": ["tan²θ", "cot²θ", "sec²θ", "cosec²θ"],
    "answer_en": "cot²θ",
    "answer_hi": "cot²θ",
    "attempted": false,
    "selected": ""
  },
  {
    "num":33,
    "question_en": "If 20% of a number is 50, then the number is:",
    "question_hi": "यदि एक संख्या का 20% 50 है, तो संख्या है:",
    "options_en": ["200", "250", "300", "350"],
    "options_hi": ["200", "250", "300", "350"],
    "answer_en": "250",
    "answer_hi": "250",
    "attempted": false,
    "selected": ""
  },
  {
    "num":34,
    "question_en": "The slope of line passing through points (2,3) and (4,7) is:",
    "question_hi": "बिंदुओं (2,3) और (4,7) से गुजरने वाली रेखा की प्रवणता है:",
    "options_en": ["1", "2", "3", "4"],
    "options_hi": ["1", "2", "3", "4"],
    "answer_en": "2",
    "answer_hi": "2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":35,
    "question_en": "The value of √(0.04) + √(0.0081) is:",
    "question_hi": "√(0.04) + √(0.0081) का मान है:",
    "options_en": ["0.29", "0.49", "0.69", "0.89"],
    "options_hi": ["0.29", "0.49", "0.69", "0.89"],
    "answer_en": "0.29",
    "answer_hi": "0.29",
    "attempted": false,
    "selected": ""
  },
  {
    "num":36,
    "question_en": "If two dice are thrown, probability of getting sum 7 is:",
    "question_hi": "यदि दो पासे फेंके जाते हैं, तो योग 7 प्राप्त होने की प्रायिकता है:",
    "options_en": ["1/6", "1/12", "1/18", "1/36"],
    "options_hi": ["1/6", "1/12", "1/18", "1/36"],
    "answer_en": "1/6",
    "answer_hi": "1/6",
    "attempted": false,
    "selected": ""
  },
  {
    "num":37,
    "question_en": "The area of a circle is 154 cm². Its circumference is: (π = 22/7)",
    "question_hi": "एक वृत्त का क्षेत्रफल 154 वर्ग सेमी है। इसकी परिधि है: (π = 22/7)",
    "options_en": ["22 cm", "44 cm", "66 cm", "88 cm"],
    "options_hi": ["22 सेमी", "44 सेमी", "66 सेमी", "88 सेमी"],
    "answer_en": "44 cm",
    "answer_hi": "44 सेमी",
    "attempted": false,
    "selected": ""
  },
  {
    "num":38,
    "question_en": "If x = 2 + √3, then x² + 1/x² = ?",
    "question_hi": "यदि x = 2 + √3, तो x² + 1/x² = ?",
    "options_en": ["14", "16", "18", "20"],
    "options_hi": ["14", "16", "18", "20"],
    "answer_en": "14",
    "answer_hi": "14",
    "attempted": false,
    "selected": ""
  },
  {
    "num":39,
    "question_en": "The average of 5 numbers is 20. If one number is excluded, average becomes 18. The excluded number is:",
    "question_hi": "5 संख्याओं का औसत 20 है। यदि एक संख्या हटा दी जाए, तो औसत 18 हो जाता है। हटाई गई संख्या है:",
    "options_en": ["22", "24", "26", "28"],
    "options_hi": ["22", "24", "26", "28"],
    "answer_en": "28",
    "answer_hi": "28",
    "attempted": false,
    "selected": ""
  },
  {
    "num":40,
    "question_en": "The length of diagonal of a square of side 10 cm is:",
    "question_hi": "10 सेमी भुजा वाले वर्ग के विकर्ण की लंबाई है:",
    "options_en": ["10 cm", "10√2 cm", "20 cm", "20√2 cm"],
    "options_hi": ["10 सेमी", "10√2 सेमी", "20 सेमी", "20√2 सेमी"],
    "answer_en": "10√2 cm",
    "answer_hi": "10√2 सेमी",
    "attempted": false,
    "selected": ""
  },
  {
    "num":41,
    "question_en": "If 3x + 4y = 10 and 2x - y = 0, then y = ?",
    "question_hi": "यदि 3x + 4y = 10 और 2x - y = 0, तो y = ?",
    "options_en": ["1", "2", "3", "4"],
    "options_hi": ["1", "2", "3", "4"],
    "answer_en": "2",
    "answer_hi": "2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":42,
    "question_en": "The value of log₂(log₃81) is:",
    "question_hi": "log₂(log₃81) का मान है:",
    "options_en": ["2", "3", "4", "5"],
    "options_hi": ["2", "3", "4", "5"],
    "answer_en": "2",
    "answer_hi": "2",
    "attempted": false,
    "selected": ""
  },
  {
    "num":43,
    "question_en": "A man buys 10 oranges for ₹100 and sells 8 for ₹100. His gain percent is:",
    "question_hi": "एक आदमी ₹100 में 10 संतरे खरीदता है और ₹100 में 8 बेचता है। उसका लाभ प्रतिशत है:",
    "options_en": ["20%", "25%", "30%", "40%"],
    "options_hi": ["20%", "25%", "30%", "40%"],
    "answer_en": "25%",
    "answer_hi": "25%",
    "attempted": false,
    "selected": ""
  },
  {
    "num":44,
    "question_en": "The value of cos 60° + sin 30° is:",
    "question_hi": "cos 60° + sin 30° का मान है:",
    "options_en": ["0", "1/2", "1", "√3/2"],
    "options_hi": ["0", "1/2", "1", "√3/2"],
    "answer_en": "1",
    "answer_hi": "1",
    "attempted": false,
    "selected": ""
  },
  {
    "num":45,
    "question_en": "The sum of ages of father and son is 45 years. Five years ago, product of their ages was 124. Father's present age is:",
    "question_hi": "पिता और पुत्र की आयु का योग 45 वर्ष है। पाँच वर्ष पहले, उनकी आयु का गुणनफल 124 था। पिता की वर्तमान आयु है:",
    "options_en": ["30", "35", "40", "45"],
    "options_hi": ["30", "35", "40", "45"],
    "answer_en": "35",
    "answer_hi": "35",
    "attempted": false,
    "selected": ""
  },
  {
    "num":46,
    "question_en": "If √x = 3, then x² = ?",
    "question_hi": "यदि √x = 3, तो x² = ?",
    "options_en": ["9", "27", "81", "243"],
    "options_hi": ["9", "27", "81", "243"],
    "answer_en": "81",
    "answer_hi": "81",
    "attempted": false,
    "selected": ""
  },
  {
    "num":47,
    "question_en": "The curved surface area of a cylinder of radius 7 cm and height 10 cm is: (π = 22/7)",
    "question_hi": "7 सेमी त्रिज्या और 10 सेमी ऊँचाई वाले बेलन का वक्र पृष्ठीय क्षेत्रफल है: (π = 22/7)",
    "options_en": ["220 cm²", "440 cm²", "660 cm²", "880 cm²"],
    "options_hi": ["220 वर्ग सेमी", "440 वर्ग सेमी", "660 वर्ग सेमी", "880 वर्ग सेमी"],
    "answer_en": "440 cm²",
    "answer_hi": "440 वर्ग सेमी",
    "attempted": false,
    "selected": ""
  },
  {
    "num":48,
    "question_en": "The mode of data: 2, 3, 5, 3, 4, 3, 7 is:",
    "question_hi": "डेटा: 2, 3, 5, 3, 4, 3, 7 का बहुलक है:",
    "options_en": ["2", "3", "4", "5"],
    "options_hi": ["2", "3", "4", "5"],
    "answer_en": "3",
    "answer_hi": "3",
    "attempted": false,
    "selected": ""
  },
  {
    "num":49,
    "question_en": "If 2a = 3b = 6c, then a + b + c = ?",
    "question_hi": "यदि 2a = 3b = 6c, तो a + b + c = ?",
    "options_en": ["0", "1", "ab", "abc"],
    "options_hi": ["0", "1", "ab", "abc"],
    "answer_en": "0",
    "answer_hi": "0",
    "attempted": false,
    "selected": ""
  },
  {
    "num":50,
    "question_en": "A number when divided by 119 leaves remainder 19. What remainder will be obtained when same number is divided by 17?",
    "question_hi": "एक संख्या को जब 119 से विभाजित किया जाता है तो शेषफल 19 आता है। जब उसी संख्या को 17 से विभाजित किया जाएगा तो क्या शेषफल प्राप्त होगा?",
    "options_en": ["2", "3", "5", "7"],
    "options_hi": ["2", "3", "5", "7"],
    "answer_en": "2",
    "answer_hi": "2",
    "attempted": false,
    "selected": ""
  }
];

// --------------------------- GLOBAL VARS -----------------------------
// --------------------------- GLOBAL VARS -----------------------------
let currentQuestion = 0;
let language = "en";
let timeLeft = 60 * 60;   // 60 minutes timer
let timerInterval;

// --------------------------- LOAD QUESTION ----------------------------
function loadQuestion(index) {
    const q = questions[index];

    document.getElementById("question").textContent =
        `${q.num}. ${language === "en" ? q.question_en : q.question_hi}`;

    document.getElementById("questionCounter").textContent =
        `Question ${index + 1} of ${questions.length}`;

    const optionsElement = document.getElementById("options");
    optionsElement.innerHTML = "";

    const options = language === "en" ? q.options_en : q.options_hi;

    options.forEach((option) => {
        const isSelected = q.selected === option;
        const optionDiv = document.createElement("div");

        optionDiv.className = "option-box";
        optionDiv.style = `
            border: 2px solid ${isSelected ? "#007bff" : "#ccc"};
            background-color: ${isSelected ? "#e7f1ff" : "white"};
            padding: 10px;
            border-radius: 8px;
            margin: 6px 0;
            cursor: pointer;
        `;

        optionDiv.innerHTML = `
            <input type="radio" name="option"
            value="${option}" ${isSelected ? "checked" : ""} /> ${option}
        `;

        optionDiv.addEventListener("click", () => {
            markAttempted(index, option);
            loadQuestion(index);
        });

        optionsElement.appendChild(optionDiv);
    });

    updateNavigation();
}

// --------------------------- MARK ATTEMPT ----------------------------
function markAttempted(index, selectedAnswer) {
    questions[index].attempted = true;
    questions[index].selected = selectedAnswer;
    updateNavigation();
}

// --------------------------- NEXT / PREV -----------------------------
function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion(currentQuestion);
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion(currentQuestion);
    }
}

// --------------------------- LANGUAGE CHANGE -------------------------
function changeLanguage() {
    language = document.getElementById("languageSelect").value;
    loadQuestion(currentQuestion);
}

// --------------------------- TIMER -------------------------------
function startTimer() {
    const timerElement = document.getElementById("timer");
    clearInterval(timerInterval);

    timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert("⏳ Time Over!");
            submitQuiz();
            return;
        }

        const h = Math.floor(timeLeft / 3600);
        const m = Math.floor((timeLeft % 3600) / 60);
        const s = timeLeft % 60;

        timerElement.textContent =
            `Time Left: ${h.toString().padStart(2, "0")}:${m
                .toString().padStart(2, "0")}:${s.toString().padStart(2, "0")}`;

        timeLeft--;
    }, 1000);
}

// --------------------------- SUBMIT QUIZ ---------------------
function submitQuiz() {
    let confirmation = confirm("Are you sure you want to submit the test?");
    if (!confirmation) return;

    clearInterval(timerInterval);

    // Calculate time spent
    const totalTimeSpent = (60 * 60) - timeLeft;
    const mins = Math.floor(totalTimeSpent / 60);
    const secs = totalTimeSpent % 60;

    // Save to localStorage
    localStorage.setItem("timeTaken", `${mins} min ${secs} sec`);

    let attempted = 0;
    let notAttempted = 0;
    let score = 0;
    const results = [];

    questions.forEach(q => {
        if (q.attempted) {
            attempted++;
            if (q.selected === q.answer_en || q.selected === q.answer_hi) {
                score++;
            }
        } else {
            notAttempted++;
        }

        results.push({
            question: language === "en" ? q.question_en : q.question_hi,
            selected: q.selected || "Not Answered",
            correct: language === "en" ? q.answer_en : q.answer_hi
        });
    });

    // Save result data
    localStorage.setItem("attempted", attempted);
    localStorage.setItem("notAttempted", notAttempted);
    localStorage.setItem("score", score);
    localStorage.setItem("results", JSON.stringify(results));

    // Stop camera stream if active
    if (videoStream) {
        videoStream.getTracks().forEach(track => track.stop());
    }

    // Redirect
    window.location.href = "/RTS/public/Deshbord/category/test/submit-test.html";
}

// --------------------------- NAVIGATION ------------------------------
function updateNavigation() {
    const nav = document.getElementById("circleContainer");
    nav.innerHTML = "";

    questions.forEach((q, i) => {
        let color = "gray";
        if (i === currentQuestion) color = "blue";
        else if (q.attempted) color = "green";

        const circle = document.createElement("div");
        circle.className = "circle";
        circle.style.background = color;
        circle.textContent = i + 1;
        circle.onclick = () => jumpToQuestion(i);
        nav.appendChild(circle);
    });
}

function jumpToQuestion(i) {
    currentQuestion = i;
    loadQuestion(i);
}

// --------------------------- CAMERA ----------------------
let videoStream;

function startCamera() {
    const container = document.createElement("div");
    container.id = "camera-container";
    container.style.position = "fixed";
    container.style.top = "10px";
    container.style.left = "10px";
    container.style.width = "130px";
    container.style.height = "130px";
    container.style.borderRadius = "50%";
    container.style.overflow = "hidden";
    container.style.background = "#000";
    container.style.border = "3px solid red";
    container.style.zIndex = "9999";
    document.body.appendChild(container);

    const video = document.createElement("video");
    video.autoplay = true;
    video.playsInline = true;
    video.style.width = "100%";
    video.style.height = "100%";
    video.style.objectFit = "cover";
    container.appendChild(video);

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            videoStream = stream;
        })
        .catch(() => alert("Camera not accessible!"));
}

// --------------------------- PAGE LOAD --------------------------
window.onload = function () {
    loadQuestion(currentQuestion);
    startTimer();
    startCamera();
};